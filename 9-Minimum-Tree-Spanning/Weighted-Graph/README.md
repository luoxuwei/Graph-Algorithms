# 带权图

1.图类型的实现上将TreeSet改成TreeMap，key是相连的顶点，也就代表对应的边，value是这条边所带的权，value的类型不限于Integer，可以是任何类型。

2.处理带权图，一个很常见的操作就是处理平行边。通常我们会基于实际问题，选择一条边放弃另外的边。比如求最小生成树和最短路径时，我们选择权重最小的边
就行了。

3.图的不同的生成树，对无权图来说，只是拓扑结构不一样，对于带权图来说，还有每条边的权值和不一样。

# 最小生成树

**定义**

图的生成树中每条边权值和最小

**应用**

带权的特征有很多的应用场景，比如布线设计，权值是两个城市间的距离，我们找到最小生成树，就是耗费最小的布线设计。

**算法思想**

直观的想法就是我们尽量使用短边。不断的在剩下的所有边中挑选权值最小的边，但必须不构成环，有环就不是生成树了。不断重复这个过程，最终得到的生成树，就是最小生成树。
这就是Kruskal算法。这个算法的过程，是一个贪心的过程，简单来说就是，我们把图中所有的边，首先进行排序，排好序后，从最小的边开始，一个一个进行选择，
如果我们选择的这条边和已经选择的边不构成环的话，我们就选择这条边，否则的话，我们就把这条边扔掉。

Kruskal算法的过程虽然很简单，但这个算法为什么是正确的了？

**切分定理**

1.什么是切分？我们将图中的顶点切分为两部分，就称为一个切分。

2.横切边，如果一个边的两个端点，属于切分不同的两边，这个边就称为横切边。有了横切边的概念后，我们可以重新定义二分图，二分图就是指，对于一个图来说，
能找到一个切分，对于这个切分来说，使得图上的所有的边都是横切边。

3.切分定理是指，对于图中任意一个切分来说，一旦我们定义了一个切分，我们就定义了横切边。那么这些横切边中的最短边，一定属于最小生成树。

4.切分定理可以用反正法证明，我们假设用一个切分的横切边中另外一条边可以得到最小生成树，而不是权值最小的边。那么我们删除这条边，将权值最小的边加入生成树，
那这个图依然是连通的，这依然是棵生成树，因为删掉的那条边，并不影响切分的两部分中的顶点的连通性，而这条加入的权值最小的边是横切边，能连通两部分。
但这条边的权值更小，这棵新的生成树的边的权值和就小于原先的生成树，等于我们得到了一颗权值更小的树，这就与我们先前的假设矛盾。因此，我们就证明了，横切边中
权值最小的横切边，一定属于最小生成树。这就是切分定理。

5.kruskal算法每次选择一个最短边，只要这个边没有形成环的话，我们就说这个边属于最小生成树。其实这个过程就是在不断的使用切分定理。因为，我们每次都
选择一个最小的没有形成环的边，这个边肯定是某一个切分的横切边。也就是说，我们在反着应用切分定理。切分定理先给定切分，然后告诉我们，对于这个切分来说
所有的横切边中最小的那个边属于最小生成树。Kruskal很巧妙的运用这个定理，反正不管什么切分，这个切分中的最短横切边都是最小生成树中的边，那么我们干脆
选择一个最短的边，这个最短的边，只要和已选择的边没有形成环的话，就一定能找到一个切分，让这个边是这个切分的最短横切边。具体这个切分是什么样子可以不管，
为什么选择的边也要满足不构成环的条件？就是不能和已选择的边属于同一个切分的横切边。

6.其实这个证明还不够严谨，严谨的证明要使用数学归纳法。证明，每次我们每多选择一条边，得到的结果肯定是最小生成树的一个子集。

**Kruskal算法实现**

1.关键是怎样快速的判断，新选择的这条边会不会与已选择的边构成环。其实很简单，当我们选择一条边时，先判断，在选择这条边之前，我们能从这条边的
一端顶点走到另一端的顶点吗？如果选择这条边之前就能走到，那选择这条边后肯定会构成环。

2.这其实就是判断连通性。我们整个这个过程，其实是动态的，我们不断的添加进选中的边，每次添加进后对下一个选中的边就需要进行判断。对于这种连通性问题
我们都可以同并查集来解决，使用并查集这个数据结构来判断连通性，最大的优势就是可以进行动态判断。

