# Edmonds-Karp-Algorithm

1.在初始的时候我们也可以构造一个残量图，只不过是这个残量图的反向边的权值都是0.这是因为在原图中没有流量，同样就没有流量可以抵消。残量图的构建是求解最大流的核心，我们初始的
时候就要求出这个残量图，在我们求最大流的过程中还需要不断的更新这个残量图。Edmonds Krap算法究竟是怎样求增广路径的了？答案出奇的简单，就是使用BFS，因为其实我们是随便找到一条
增广路径就可以，那么问题就转变成了，我们在残量图找到一条从源点到汇点对应的路径，本质就是一个寻找路径的问题。只不过在寻找路径的是时候要小心，因为在残量图中有的边的权值为0
对于权值为0的边我们不能走而已。

2.用BFS找增广路径，本质和在图中找到一条从源点到汇点的路径没有任何区别，广度优先比遍历是从源点出发，先遍历它所有的相邻节点，假如相邻节点之前还没有遍历过，然后把相邻节点放入
队列中，每次从对首再拿出一个新的节点遍历它的相邻节点，以此类推。在我们通过BFS在原图找到一条路径后，我们就可以知道这条路径的最大流量，然后我们更新这条路径上所有边的流量，对应的我们在
残量图中也需要进行对应的更新（原图的边用边的最大容量减去流量，残量图中的反向边的权值就是原边的流量），那么现在我们可以看一下残量图中还有没有新的路径，依然用BFS找，我们找到
新的路径后，再次更新原图边的流量和残量图中反向边的流量。直到我们从源点出发找不到还能添加流量的边了。就说明此时我们再也找不到增广路径了，就表明此时找不到能够使我们整个流量
更大的方法。这样一来我们就获得了，整个网络的最大流，是我们每次找到增广路径的最大流量的和。

3.因此我们实现这个算法，最关键的一点其实是实现一个BFS，这个BFS是套在一个循环中的，我们不断的寻找增广路径，在寻找到增广路径之后，我们对残量图进行更新。

# 最大流算法的基本架构

1.用两个图类对象，一个保存原图，一个保存残量图。从原图构造残量图，只需要对应原图每条边创建一条反向边，初始权值为0，即可。

2.在残量图中进行bfs遍历，找到从源点到汇点的路径。

3.更新残量图时，遍历找到的路径上的每条边，找到所有边的最小权值，这个最小权值就是这次找到的增广路径所能添加的流量。

4.用找到的最小权值，更新残量图边的权值，遍历找到路径的每条边，通过判断原图中是否有这条边来确定这条边是正向边还是反向边，如果是正向边，将残量图中这条边的权值减去这个值，
相应的将这条边的反向边的权值，加上这个值。如果是反向边，将这条反向边的权值减去这个值，将对应的正向边的权值加上这个值，这里有点绕，需要细细体会，直觉上可以理解为，从反向边
流入的流量抵消掉了远来正向边的流量，所以原来正向边又能通过更多的流量了，所以是加上这个值。也可以理解为，这条反向边上有流量就表明，原来从正向边走的这部分流量应该分流到其他边，才能找到
这条增广路径，往图中添加更多的流量。

5.最终求得的图的最大流量就是每次找到的增广路径所添加的流量的和，就是每次找到的路径上最小边的权值和，而原图某条边上最终流经的流量就是残量图中对应反向边的权值。这一点很好理解
反向边权值的定义就是当前正向边流经的流量。

6.所有基于Ford-Fulkerson思想的最大流算法的复杂度都是: O(maxflow * E),这是因为Ford FulKerson 思想就是不断的在图中寻找增广路径，没寻找到一个增广路径，我们的最大流都会
增加，至少整个图中的流量加了1，所以在最多的情况下，我们整个图需要找maxflow这么多次增广路径，每次找增广路径都要把每个点没条边扫描一遍。

7.Edmonds Karp 算法的复杂度是O(V*E*E)，这个复杂度看起来很大，但是和O(maxflow*E)比可能在很多时候是有优势的，因为maxflow其实和这张图对应的那个边上的权值是相关的，而一个图
边上的权值有可能非常大，我们这个图的规模可能很小.

## 最大流问题建模

1.每个还有比赛的队伍的组合当做一个节点，从源点到每个节点的权值就是这一对队伍还有多少场比赛，这么多场比赛，每场比赛就会有胜有负，相应的这些胜负就会分配给不同的队伍。

2.每个队伍是一个节点，一对比赛到这个队伍的节点就要连边，某一对队伍还有多少场比赛，从这对队伍的比赛场次中分给其中每个队的胜利数，最多就是对应的比赛场次，所以从这对比赛到其中每队的节点的边上的权值就是这对队伍还有
多少场比赛的场数，代表最多能给这个队分多少场胜利。

3.最终我们设立一个汇点，每个队伍到汇点之间也有一条边，这个边的权值的意思是这个队，最多还能获得多少场胜利。这样我们就建立了一个网络流模型。

4.在这个网络流模型中，从源点发出的流量就表示我们还有这么多的胜利需要分配，分配到队伍中，最终我们每个队到汇点之间的边有容量限制，所以就保证了每个队伍最多只能获得这么多场胜利。

5.如果这个网络的最大流就是剩下的场次，就意味着对于这么多场比赛，我们可以分配他们的胜利，使得每个队伍最多只获得那么多场胜利，否则的话，如果比剩下的场次小的话，就意味着
无法分配来满足每个队最多只能获得那么多场胜利，这样的限制 